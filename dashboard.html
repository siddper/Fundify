<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="icon" type="image/png" href="fundifyIcon.png">
  <link rel="stylesheet" href="auth-styles.css">
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body class="dashboard-bg">
  <div class="dashboard-layout">
    <aside class="sidebar">
      <div class="sidebar-top">
        <img src="fundifyIcon.png" alt="Fundify Logo" class="sidebar-logo-img">
        <select class="sidebar-projects-dropdown">
          <option>Default Project</option>
          <option>Personal</option>
          <option>School</option>
        </select>
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li class="active"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M192-144v-456l288-216 288 216v456H552v-264H408v264H192Z"/></svg></span>Dashboard</li>
        </ul>
      </nav>
      <div class="sidebar-footer">
        <span>Fundify</span>
      </div>
      <div class="sidebar-resize-handle"></div>
    </aside>
    <main class="dashboard-main">
      <header class="dashboard-topbar">
        <div class="topbar-left">
          <span class="dashboard-title">Transactions</span>
          <div class="current-balance">
            <span class="balance-label">Balance:</span>
            <span class="balance-amount" id="current-balance-amount">$0.00</span>
          </div>
        </div>
        <button class="dashboard-add-btn" id="openAddModal">
            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#e3e3e3"><path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"/></svg>
        </button>
      </header>
      <div class="dashboard-controls">
        <div class="bulk-actions-container" id="bulk-actions-container" style="display: none;">
            <span id="selection-count"></span>
            <div class="bulk-actions-buttons">
                <button id="bulk-copy-btn" class="bulk-action-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="M160-40q-33 0-56.5-23.5T80-120v-560h80v560h440v80H160Zm160-160q-33 0-56.5-23.5T240-280v-560q0-33 23.5-56.5T320-920h280l240 240v400q0 33-23.5 56.5T760-200H320Zm240-440h200L560-840v200Z"/></svg>Copy</button>
                <button id="bulk-delete-btn" class="bulk-action-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm80-160h80v-360h-80v360Zm160 0h80v-360h-80v360Z"/></svg>Delete</button>
            </div>
        </div>
        <div class="search-sort-container" id="search-sort-container">
          <div class="search-container">
              <input type="text" id="search-input" placeholder="Search transactions...">
              <button id="ai-search-btn" class="ai-search-btn" title="Search with AI">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>                               
              </button>
          </div>
          <div class="custom-dropdown sort-dropdown" id="sort-dropdown">
            <button type="button" class="dropdown-selected" id="sort-selected">Sort by Default</button>
            <ul class="dropdown-list" id="sort-list">
              <li data-value="default">Default</li>
              <li data-value="date_asc">Date: Oldest First</li>
              <li data-value="date_desc">Date: Newest First</li>
              <li data-value="amount_asc">Amount: Low to High</li>
              <li data-value="amount_desc">Amount: High to Low</li>
            </ul>
          </div>
        </div>
        <div class="filter-bar">
          <div id="filter-chips-container"></div>
          <button id="add-filter-btn" class="add-filter-btn" type="button">+ Add Filter</button>
        </div>
      </div>
      <section class="dashboard-table-section">
        <table class="dashboard-table">
          <thead>
            <tr>
              <th><input type="checkbox" id="select-all-checkbox"></th>
              <th>#</th>
              <th>Date</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Store/Source</th>
              <th>Method</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </section>
    </main>
  </div>
  <div class="modal-bg" id="addModal">
    <div class="modal-content">
      <button class="modal-close" id="closeAddModal" title="Close">Ã—</button>
      <div class="modal-header">
        <h2 id="modal-title">Add Transaction</h2>
      </div>
      <div class="modal-body">
        <div class="modal-tabs">
            <button class="modal-tab-btn active" data-content-id="add-transaction-content">
                <span class="option-title">Add Transaction</span>
                <span class="option-desc">Manually enter an expense or deposit.</span>
            </button>
            <button class="modal-tab-btn" data-content-id="quick-transaction-content">
                <span class="option-title">Quick Transaction</span>
                <span class="option-desc">Use AI to parse a transaction from text.</span>
            </button>
            <button class="modal-tab-btn" data-content-id="add-preset-content">
                <span class="option-title">Add Preset</span>
                <span class="option-desc">Save a template for a frequent transaction.</span>
            </button>
            <button class="modal-tab-btn" data-content-id="quick-preset-content">
                <span class="option-title">Quick Preset</span>
                <span class="option-desc">Use AI to create a new preset from text.</span>
            </button>
        </div>
        <div class="modal-tab-content">
            <div id="add-transaction-content" class="tab-pane active">
              <div id="presets-container"></div>
              <form class="transaction-form">
                <div class="form-group">
                  <label for="custom-type">Type</label>
                  <div class="custom-dropdown" id="custom-type-dropdown">
                    <button type="button" class="dropdown-selected" id="custom-type-selected">Withdrawal</button>
                    <ul class="dropdown-list" id="custom-type-list">
                      <li data-value="Withdrawal">Withdrawal</li>
                      <li data-value="Deposit">Deposit</li>
                    </ul>
                  </div>
                </div>
                <div class="form-group">
                  <label for="custom-date">Date</label>
                  <div class="custom-date-picker" id="custom-date-picker">
                    <input type="text" id="custom-date-input" placeholder="mm/dd/yyyy" readonly>
                    <span class="calendar-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Z"/></svg></span>
                    <div class="calendar-popup" id="calendar-popup"></div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="amount">Amount</label>
                  <input type="number" name="amount" id="amount" placeholder="Amount" min="0" step="0.01" >
                </div>
                <div class="form-group">
                  <label for="custom-method">Method</label>
                  <div class="custom-dropdown" id="custom-method-dropdown">
                    <button type="button" class="dropdown-selected" id="custom-method-selected">Method</button>
                    <ul class="dropdown-list" id="custom-method-list">
                      <li data-value="Credit">Credit</li>
                      <li data-value="Debit">Debit</li>
                      <li data-value="Cash">Cash</li>
                      <li data-value="Check">Check</li>
                    </ul>
                  </div>
                </div>
                <div class="form-group full-width">
                  <label for="store">Store/Source</label>
                  <input type="text" name="store" id="store" placeholder="Store/Source" >
                </div>
                <div class="form-actions">
                  <button type="button" class="modal-cancel-btn">Cancel</button>
                  <button type="submit" class="modal-action-btn">Add Transaction</button>
                </div>
              </form>
            </div>
            <div id="quick-transaction-content" class="tab-pane">
              <form>
                  <div class="quick-input-container">
                    <textarea class="quick-transaction-prompt" placeholder="e.g., spent $15.50 on lunch at Chipotle with my credit card"></textarea>
                    <button type="button" class="mic-btn" id="start-voice-recognition"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Zm-40 280v-123q-104-14-172-93t-68-184h80q0 83 58.5 141.5T480-320q83 0 141.5-58.5T680-520h80q0 105-68 184t-172 93v123h-80Z"></path></svg></button>
                  </div>
                  <div class="ai-message-container"></div>
                  <div class="form-actions">
                    <button type="submit" class="modal-action-btn">Add Transaction</button>
                  </div>
              </form>
            </div>
            <div id="add-preset-content" class="tab-pane">
              <form class="preset-form">
                <div class="form-group full-width">
                  <label for="preset-name">Name</label>
                  <input type="text" name="presetName" id="preset-name" placeholder="Preset Name" >
                </div>
                <div class="form-group">
                  <label for="custom-preset-type">Type</label>
                  <div class="custom-dropdown" id="custom-preset-type-dropdown">
                    <button type="button" class="dropdown-selected" id="custom-preset-type-selected">Withdrawal</button>
                    <ul class="dropdown-list" id="custom-preset-type-list">
                      <li data-value="Withdrawal">Withdrawal</li>
                      <li data-value="Deposit">Deposit</li>
                    </ul>
                  </div>
                </div>
                <div class="form-group">
                  <label for="custom-preset-date">Date</label>
                  <div class="custom-date-picker" id="custom-preset-date-picker">
                    <input type="text" id="custom-preset-date-input" placeholder="mm/dd/yyyy" readonly>
                    <span class="calendar-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Z"/></svg></span>
                    <div class="calendar-popup" id="custom-preset-calendar-popup"></div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="preset-amount">Amount</label>
                  <input type="number" name="amount" id="preset-amount" placeholder="Amount" min="0" step="0.01" >
                </div>
                <div class="form-group">
                  <label for="custom-preset-method">Method</label>
                  <div class="custom-dropdown" id="custom-preset-method-dropdown">
                    <button type="button" class="dropdown-selected" id="custom-preset-method-selected">Method</button>
                    <ul class="dropdown-list" id="custom-preset-method-list">
                      <li data-value="Credit">Credit</li>
                      <li data-value="Debit">Debit</li>
                      <li data-value="Cash">Cash</li>
                      <li data-value="Check">Check</li>
                    </ul>
                  </div>
                </div>
                <div class="form-group full-width">
                  <label for="preset-store">Store/Source</label>
                  <input type="text" name="store" id="preset-store" placeholder="Store/Source" >
                </div>
                <div class="form-actions">
                  <button type="button" class="modal-cancel-btn">Cancel</button>
                  <button type="submit" class="modal-action-btn">Save Preset</button>
                </div>
              </form>
            </div>
            <div id="quick-preset-content" class="tab-pane">
              <form>
                <div class="quick-input-container">
                  <textarea class="quick-preset-prompt" placeholder="e.g., Chipotle lunch for $20 with cash"></textarea>
                  <button type="button" class="mic-btn" id="start-voice-recognition-preset"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Zm-40 280v-123q-104-14-172-93t-68-184h80q0 83 58.5 141.5T480-320q83 0 141.5-58.5T680-520h80q0 105-68 184t-172 93v123h-80Z"></path></svg></button>
                </div>
                <div class="ai-message-container"></div>
                <div class="form-actions">
                  <button type="submit" class="modal-action-btn">Save Preset</button>
                </div>
              </form>
            </div>
        </div>
      </div>
    </div>
  </div>

  <div class="voice-recognition-ui" id="voice-recognition-ui">
    <div class="voice-ui-content">
      <div class="waveform-container" id="waveform-container">
        <!-- Bars will be generated by JS -->
      </div>
      <div class="voice-ui-controls">
        <div class="voice-status">
          <span class="recording-dot"></span>
          <span id="voice-status-text">Listening...</span>
        </div>
        <button class="voice-ui-btn" id="stop-voice-recognition">Stop <kbd>Space</kbd></button>
        <button class="voice-ui-btn" id="cancel-voice-recognition">Cancel <kbd>Esc</kbd></button>
      </div>
    </div>
  </div>

  <div id="filter-modal" class="filter-modal-bg">
    <div class="filter-modal-content">
      <button class="filter-modal-close" id="close-filter-modal" title="Close">&times;</button>
      <h3>Add Filter</h3>
      <div class="filter-type-row">
        <label for="filter-type-select">Filter by:</label>
        <select id="filter-type-select">
          <option value="date">Date</option>
          <option value="type">Type</option>
          <option value="amount">Amount</option>
          <option value="store_source">Store/Source</option>
          <option value="method">Method</option>
        </select>
      </div>
      <div id="filter-value-inputs"></div>
      <div class="filter-modal-actions">
        <button id="apply-filter-btn" class="modal-action-btn">Add Filter</button>
      </div>
    </div>
  </div>

  <script src="dashboard.js"></script>
</body>
</html>
